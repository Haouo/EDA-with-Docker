services:
  eda_server:
    build:
      context: rocky
      pull: false
    image: eda_docker_rocky
    container_name: eda_docker_rocky_container
    hostname: rocky
    volumes:
      - shared-workspace:/home/rocky/workspace
      - /cad:/cad:ro
      - /sys:/sys:ro # this is important for fixing dc_shell runtime error
      - /etc/hosts:/etc/hosts:ro # this is important for EDA license checking
    networks:
      - internal
    expose:
      - 22
  normal_server:
    build:
      context: ubuntu
      pull: false
    image: eda_docker_ubuntu
    container_name: eda_docker_ubuntu_container
    hostname: ubuntu
    environment:
      - DISPLAY=${DISPLAY}
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix:rw
      - shared-workspace:/home/ubuntu/workspace
    networks:
      - internal
    expose:
      - 22

networks:
  internal:
    driver: bridge
    external: false

volumes:
  shared-workspace: {}
